machine:
  environment:
    PATH: '$PATH:$HOME/node/node-v6.11.3-darwin-x64'
  xcode:
    version: 9.0
dependencies:
  cache_directories:
    - $HOME/node
  pre:
    - "ls \"$HOME/node/node-v6.11.3-darwin-x64\" || mkdir \"$HOME/node\""
    - "ls \"$HOME/node/node-v6.11.3-darwin-x64\" || curl -L \"https://nodejs.org/dist/v6.11.3/node-v6.11.3-darwin-x64.tar.gz\" -o \"$HOME/node/node-v6.11.3-darwin-x64.tar.gz\""
    - "ls \"$HOME/node/node-v6.11.3-darwin-x64\" || tar -xzf \"$HOME/node/node-v6.11.3-darwin-x64.tar.gz\" -C \"$HOME/node/\""
    - "rm -f \"$HOME/node/node-v6.11.3-darwin-x64.tar.gz\""
checkout:
  post:
    - npm -v
    - node -v
    - sysctl -n hw.ncpu
    - sysctl -n hw.memsize
    - df -h
compile:
  override:
    - MESSAGE="$(git log --format=%B -n 1 HEAD)"
    - case ${MESSAGE} in Bump* ) export ELECTRON_RELEASE=1 ;;
    - esac
    - export TARGET_ARCH=x64
    - script/cibuild
